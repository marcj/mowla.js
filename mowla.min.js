(function(){var a={};this.mowla={};this.mowla.length=function(a){if(typeof a=="array")return a.length;if("keys"in Object)return Object.keys(a).length;else{var b=0;for(i in a)if(a.hasOwnProperty(i))b++;return b}};this.mowla.forEach=function(a,b){var c=0;var d=mowla.length(a);if(Object.prototype.toString.call(a)!=="[object Array]"){for(c in a)if(a.hasOwnProperty(c))b(a[c],c==0,c==d-1,c++ +1)}else{for(len=a.length;c<len;c++)b(a[c],c==0,c==d-1,c+1)}};this.mowla.render=function(a,b){a.innerHTML=mowla.fetch(a,b)};this.mowla.compile=function(a){try{return new Function("data",code=mowla.getCode(a))}catch(b){console.log("[mowla.compile] error in following generated code");console.log(code);throw b}},this.mowla.escape=function(a){return typeof a=="string"?a.replace(/</g,"<").replace(/>/g,">"):a};this.mowla.getCode=function(a){return"with(data){ _ = '"+a.replace(/\n/g,"'+\"\\n\"\n+'").replace(/([^\\])\{\/(if|for|while)\}/g,"$1'; \\} _ += '").replace(/([^\\])\{else\}/g,"$1'; \\} else \\{ _ += '").replace(/([^\\])\{\/foreach\}/g,"$1'; \\}); _ += '").replace(/([^\\])\{foreach ([^\}]*) as ([^\}]*)\}/g,"$1'; mowla.forEach($2, function($3, first, last, index)\\{ _ += '").replace(/([^\\])\{call ([^\}\\]*(?:\\.[^}\\]*)*)\}/g,"$1'; $2; _ += '").replace(/([^\\])\{html ([^\}\\]*(?:\\.[^}\\]*)*)\}/g,"$1'; _ += ($2); _ += '").replace(/([^\\])\{(if|for|while) ([^}]*)\}/g,"$1'; $2 ($3) \\{ _ += '").replace(/([^\\])\{var ([^}]*)\}/g,"$1'; ($2); _ += '").replace(/([^\\]){/g,"$1'; _ += mowla.escape(").replace(/([^\\])}/g,"$1); _ += '").replace(/\\{/g,"{").replace(/\\}/g,"}")+"'; return _;}"};this.mowla.htmlEntities=function(a){return a.replace(/&/g,"&").replace(/>/g,">").replace(/</g,"<")};this.mowla.fetch=function(b,c){if(!c)c=window;if(typeof b=="object"&&"innerHTML"in b)return mowla.fetch(mowla.htmlEntities(b.innerHTML),c);return(a[b]||(a[b]=mowla.compile(b)))(c)}})()